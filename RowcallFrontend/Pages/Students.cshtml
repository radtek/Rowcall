@page
@model ContactModel
@{
    ViewData["Title"] = "Students";
}


<div class="row">
    <div class="col-6 mx-auto">
        <div class="login-container">
            <h2>@ViewData["Title"]</h2>
            <hr />
            <form>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="text" class="form-control" id="email" placeholder="Example@mail.com">
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" class="form-control" id="password" placeholder="password">
                </div>
                <div class="form-group">
                    <label for="verificationToken">Token:</label>
                    <input type="text" class="form-control" id="verificationToken" placeholder=" - Token from teacher - ">
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-primary" id="verifyBtn">Verify attendence</button>
                </div>

            </form>
            <hr />
        </div>
    </div>
</div>






@section Scripts{
    <script>
            $("#verifyBtn").click(function () {

                var email = $("#email").val();
                var pw = $("#password").val();
                var token = $("#verificationToken").val();

                if (!email) {
                    $("#email").focus()
                    return;
                } else if (!pw) {
                    $("#password").focus()
                    return;
                } else if (!token) {
                    $("#verificationToken").focus()
                    return;
                }

                var data = {
                    email: email,
                    password: pw,
                    tokenValue: token,
                };

                $.ajax({
                    url: "http://localhost:2265/account/studentLogin",
                    method: "POST",
                    dataType: 'json',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    data: JSON.stringify(data),
                    success: function (response) {
                        console.log(response)
                        alert(response);
                    },
                    error: function (error) {
                        $("#errorModal").modal()
                        console.log(response)
                    }
                });


            });
        
    </script>
}